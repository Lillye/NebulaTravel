function Calendar(e,t){this.now=new Date,this.day=this.now.getDate(),this.month=this.now.getMonth(),this.year=this.now.getFullYear(),this.anchor=e,this.divContainer=null,this.divTable=null,this.divDateText=null,this.divButtons=null,this.selectedDay=null,this.onDateSelect=function(e){if(window.innerWidth>850)var t=document.querySelectorAll(".row-table");else t=document.querySelectorAll(".day-table");e.events.forEach(n=>{const a=document.createElement("section"),i=document.createElement("h3"),s=document.createElement("span"),d=document.createElement("p"),l=document.createElement("a");if(a.classList.add("event-container"),i.innerHTML=n.name,0==e.happened?s.classList.add("event-"+n.availableTickets):s.classList.add("event-outdated"),s.classList.add("inner-event-marker"),d.innerHTML=n.overview,l.innerHTML="Read More",l.setAttribute("href","Flight?="+n.flightId),n.picture){const e=document.createElement("div");e.style.backgroundImage="url("+n.picture+")",a.appendChild(e)}a.appendChild(i),a.appendChild(s),a.appendChild(d),a.appendChild(l),window.innerWidth>850?t[e.row-1].appendChild(a):t[e.number].appendChild(a)}),window.innerWidth>850?t[e.row-1].style.display="flex":t[e.number].style.display="flex",this.selectedDay=e,this.selectedDay.classList.add("selected-day")}.bind(this),this.clearDateSelect=function(){var e=document.querySelectorAll(".flights-table");for(let t=0;t<e.length;t++)e[t].style.display="none",e[t].innerHTML="";null!=this.selectedDay&&(this.selectedDay.classList.remove("selected-day"),this.selectedDay=null)}.bind(this),this.createButtons=function(){const e=document.createElement("button"),t=document.createElement("button");e.innerText="<",t.innerText=">",e.type="button",t.type="button",e.classList.add("arrow"),t.classList.add("arrow"),e.addEventListener("click",function(){this.month--,this.month<0&&(this.month=11,this.year--),this.createCalendarTable(),this.createDateText()}.bind(this)),t.addEventListener("click",function(){this.month++,this.month>11&&(this.month=0,this.year++),this.createCalendarTable(),this.createDateText()}.bind(this)),this.divButtons.appendChild(e),this.divButtons.appendChild(t)},this.createDateText=function(){this.divDateText.innerHTML=["January","February","March","April","May","June","July","August","September","October","November","December"][this.month]+" "+this.year},this.createCalendarTable=function(){this.divTable.innerHTML="";const e=document.createElement("table");e.classList.add("inner-table");let n=document.createElement("div");n.classList.add("months-table");const a=["SUN","MON","TUE","WED","THU","FRI","SAT"];for(let e=0;e<a.length;e++){const t=document.createElement("div");t.classList.add("month"),t.innerHTML=a[e],n.appendChild(t)}e.appendChild(n);const i=new Date(this.year,this.month+1,0).getDate();let s=new Date(this.year,this.month,1).getDay();const d=i+s;var l=0,c=0;0!==s&&(row=document.createElement("div"),eventsCell=document.createElement("div"),row.classList.add("days-table"),eventsCell.classList.add("flights-table"),eventsCell.classList.add("row-table"),e.appendChild(row),c++,e.appendChild(eventsCell));var r=0;for(let e=0;e<s;e++){const e=document.createElement("div");e.classList.add("empty-day-container"),e.innerHTML="",row.appendChild(e),l++,r++}for(let n=s;n<d;n++){n%7==0&&(row=document.createElement("div"),eventsCell=document.createElement("div"),row.classList.add("days-table"),eventsCell.classList.add("flights-table"),eventsCell.classList.add("row-table"),e.appendChild(row),c++,e.appendChild(eventsCell));const a=document.createElement("div"),i=document.createElement("div"),d=document.createElement("div"),o=document.createElement("div");i.innerText=n-s+1,d.dayNr=n-s+1,a.dayNr=n-s+1,a.eventsInDay=0,a.events=[],a.number=l-r,a.row=c,a.classList.add("day-container"),a.happened=!0,i.classList.add("day"),d.classList.add("events"),o.classList.add("flights-table"),o.classList.add("day-table"),this.year===this.now.getFullYear()&&this.month===this.now.getMonth()&&this.day===n-s+1&&a.classList.add("today");var h=this.year+"-";this.month+1<10?h+="0"+(this.month+1)+"-":h+=this.month+1+"-",h+=n-s+1<10?"0"+(n-s+1):n-s+1;for(let e=0;e<t.length;e++)if(t[e].date==h){if(a.eventsInDay<3){const i=document.createElement("span");this.now.getFullYear()>this.year?i.classList.add("event-outdated"):this.now.getMonth()>this.month&&this.now.getFullYear()==this.year?i.classList.add("event-outdated"):n-s+1<this.day&&this.now.getMonth()==this.month&&this.now.getFullYear()==this.year?i.classList.add("event-outdated"):(i.classList.add("event-"+t[e].availableTickets),a.happened=!1),d.appendChild(i)}a.eventsInDay++,a.events.push(t[e])}if(a.eventsInDay>3){const e=document.createElement("span");e.classList.add("additional-events-marker"),d.appendChild(e)}a.appendChild(i),l++,a.appendChild(d),row.appendChild(a),row.appendChild(o)}for(let e=l;e<35;e++){const e=document.createElement("div");e.classList.add("empty-day-container"),e.innerHTML="",row.appendChild(e)}e.appendChild(row),e.appendChild(eventsCell),this.divTable.appendChild(e)},this.selectDay=function(e,t){t.classList.contains("day-container")&&t.eventsInDay>0&&(this.clearDateSelect(),this.onDateSelect(t),e.stopPropagation())}.bind(this),this.bindTableDaysEvent=function(){this.divTable.addEventListener("click",function(e){this.selectDay(e,e.target.parentElement.parentElement),this.selectDay(e,e.target.parentElement),this.selectDay(e,e.target)}.bind(this)),document.addEventListener("click",function(e){e.target.classList.contains("flights-table")||e.target.parentElement.classList.contains("flights-table")||e.target.parentElement.parentElement.classList.contains("flights-table")||this.clearDateSelect()}.bind(this))},this.init=function(){this.divContainer=document.createElement("div"),this.divButtons=document.createElement("div"),this.divButtons.className="arrow-bar",this.createButtons(),this.divDateText=document.createElement("div"),this.divDateText.className="date-text",this.createDateText(),this.divHeader=document.createElement("div"),this.divHeader.classList.add("calendar-header"),this.divHeader.appendChild(this.divButtons),this.divHeader.appendChild(this.divDateText),this.divContainer.appendChild(this.divHeader),this.divTable=document.createElement("div"),this.divContainer.appendChild(this.divTable),this.createCalendarTable(),this.bindTableDaysEvent(),this.anchor.appendChild(this.divContainer)}}fetch("data").then(e=>e.json()).then(e=>{document.getElementById("loader").style.display="none",new Calendar(document.querySelector("#app-container"),e).init()});